---
# Front Matter
title: "[Python] 가상환경 생성 및 활성화"
categories: pythonInfo
tags: python, venv
date: YYYY-MM-DD HH:MM:SS +09:00

# 목차
toc: true  
toc_sticky: true 
---

# 가상 환경이란
- 파이썬에서 가상환경(virtual environment)은 프로젝트마다 독립된 파이썬 환경을 제공하는 시스템
- 각 프로젝트에 필요한 라이브러리와 패키지를 다른 프로젝트와 독립적으로 설치하고 관리할 수 있게 해줌
- 이를 통해 프로젝트 간의 종속성 충돌을 방지하고, 서로 다른 프로젝트가 서로 다른 라이브러리 버전을 요구하는 경우에도 문제가 발생하지 않는다.

## 1. 가상환경의 주요 특징
1. 독립된 환경
    - 각 가상환경은 독립적이므로, 하나의 프로젝트에서 사용하는 패키지나 라이브러리가 다른 프로젝트에 영향을 미치지 않는다.

1. 다양한 종속성 관리
    - 프로젝트마다 필요한 패키지와 그 버전을 별도로 설치하고 관리할 수 있다.

1. 프로젝트 관리 용이
    - 가상환경을 사용하면 프로젝트 간의 종속성 충돌을 방지하고, 동일한 환경에서 개발 및 테스트를 진행할 수 있어 일관성을 유지할 수 있다.

1. 파이썬 버전 관리
   - 가상환경을 사용하면 프로젝트별로 다른 파이썬 버전을 사용할 수도 있다.

## 2. 가상환경 사용 이유
1. 패키지 충돌 방지
    - 서로 다른 프로젝트가 동일한 패키지의 다른 버전을 요구하는 경우 충돌 방지.

1. 개발 환경 재현
    - 특정 프로젝트에서 사용된 패키지의 버전을 그대로 재현할 수 있어, 다른 개발자가 동일한 환경에서 작업을 하기 쉬워짐.

3. 업데이트 관리
    - 가상환경을 사용하면 시스템 전반에 영향을 미치지 않고 개별 프로젝트의 종속성을 업데이트할 수 있음.

## 3. 가상환경 생성 방법
- conda를 사용해서 생성하는 방법과 venv 모듈 에서 생성하는 방법이 있는데 이번에는 venv 모듈로 생성하는 방법으로 정리
- venv는 파이썬 3.3 이상부터 사용 가능

### 1) 가상환경 생성하기
가상환경을 생성 하려면 다음과 같은 명령어를 사용한다.
```bash
python -m venv <가상환경 이름>
# 윈도우환경이 아니라 리눅스라면 
python3 -m venv <가상환경 이름>

# 특정버전을 명시하여 생성 가능
python3.8 -m venv <가상환경 이름>
```
#### m 옵션의 일반적인 의미
- 파이썬에서 -m 옵션은 모듈을 스크립트처럼 실행할 수 있게 함. 즉, 모듈을 직접 명령어로 호출할 수 있게 해주는 옵션.
- 개인적으로 자신의 프로젝트 디렉터리 안에서 해당 명령어를 사용하여 프로젝트 폴더안에 가상 환경 폴더가 생성되게 한다.
```bash
# 개인적인 파이썬 프로젝트 구조
project_name/
│
├── venv/                # 가상환경 디렉터리
├── src/                 # 소스 코드 디렉터리
│   ├── __init__.py      # 패키지 초기화 파일
│   └── main.py          # 메인 실행 파일 또는 모듈
│
├── requirements.txt     # 프로젝트에 필요한 패키지 목록
├── .gitignore           # Git에서 무시할 파일 목록 (venv 폴더 포함)
└── README.md            # 프로젝트 설명 파일
```
구조에 대한 자세한 설명은 [아래](#파이썬-프로젝트-구조)에 간단하게 추가 서술 예정

### 2) 가상환경 활성화 하기
- 가상환경을 활성화하면 그 환경 안에서 설치된 패키지들이 현재 프로젝트에서 사용된다.
- 운영체제에 따라 활성화 명령어가 다르다.

```bash
# Linux/macOS
source venv/bin/activate

#Windows
venv\Scripts\activate
또는
venv\Scripts\activate.ps1 # Powershell을 사용시
```
- 가상환경이 활성화되면 터미널의 프롬프트 앞에 가상환경 이름이 표시되며, 이를 통해 가상환경이 활성화된 상태임을 알 수 있음.
```bash
(.venv) user@DESKTOP-12345:~/python-venv/$
```
- 가상환경이 활성화 됐을때 pip와 python은 모두 가상환경 폴더 안에 python과 pip를 사용하게 되며, 가상환경 실행중 pip로 설치한 모듈은 모두 lib폴더에 저장되게 된다.
### 3) 가상환경 비활성화 하기
- 가상환경을 종료하려면 `deactivate` 명령어를 사용
```bash
deactivate
```


## 4. 참고
### 파이썬 프로젝트 구조
```bash
# 개인적인 파이썬 프로젝트 구조
project_name/
│
├── venv/                # 가상환경 디렉터리
├── src/                 # 소스 코드 디렉터리
│   ├── __init__.py      # 패키지 초기화 파일
│   └── main.py          # 메인 실행 파일 또는 모듈
│
├── requirements.txt     # 프로젝트에 필요한 패키지 목록
├── .gitignore           # Git에서 무시할 파일 목록 (venv 폴더 포함)
└── README.md            # 프로젝트 설명 파일
```

### 1. 각 디렉터리와 파일의 역할
1. venv/
    - 가상환경 디렉터리.
    - python -m venv venv 명령어로 생성되며, 프로젝트에 필요한 파이썬 패키지가 이 안에 설치됨.
    - 일반적으로 이 폴더는 Git에 포함시키지 않음 (.gitignore에 추가).
    - 가상환경은 각 컴퓨터의 운영체제와 파이썬 설치 환경에 맞춰서 생성되기 때문에, 다른 시스템에서 동일한 가상환경을 그대로 사용하기 어려움.
    - 프로젝트의 의존성은 아래 서술할 requirements.txt로 관리함

2. src/
    - 소스 코드가 저장되는 디렉터리. 
    - 일반적으로 프로젝트의 주요 코드 파일들이 이곳에 위치함.
   - 여러 모듈로 구성될 경우, 디렉터리 내부에 여러 .py 파일이나 서브 디렉터리가 있을 수 있음.
   - 여러 모듈들을 만들게되어 하위에 여러 디렉터리가 추가될경우 디렉터리 별로 `__init__.py` 파일을 추가해서 패키지로 정의되어 인식되게 할 수 있음

3. requirements.txt
    - 프로젝트에 필요한 패키지와 해당 버전을 명시한 파일.
    - `pip freeze > requirements.txt` 명령어로 현재 가상환경에 설치된 패키지를 이 파일에 기록할 수 있음.
    - requirements.txt 파일 예시    
    ```text
    Flask==2.0.1
    requests==2.26.0
    pandas==1.3.3
    ```
    - 이 파일을 통해 다른 개발자가 프로젝트의 의존성을 쉽게 설치할 수 있음.
    - 가상환경을 활성화 한 상태에서 다음 명령어를 사용해서 의존성을 설치 할 수 있다.
    ```bash
    pip install -r requirements.txt

    # -r 옵션은 pip에게 주어진 파일(예: requirements.txt)을 읽고, 그 파일에 명시된 모든 패키지를 설치하라는 지시
    ```
4. .gitignore
    - Git에서 무시할 파일과 디렉터리를 지정하는 파일.
    - 일반적으로 가상환경(venv/), 컴파일된 파일, 임시 파일 등을 무시하기 위해 사용함.
    - 예시
    ```markdown
    venv/
    __pycache__/
    *.pyc
    ```
    - 참고 : gitignore파일 생성해주는 사이트 https://www.toptal.com/developers/gitignore/